## 开篇

大家好，我是练习时长1年的Flutter练习生，渣渣法，喜欢写bug，发鸡汤，当吃播。

一晃眼，入坑Flutter已经一年的时间，[Flutter Candies](https://github.com/fluttercandies) 全家桶也从我一个人到现在有八个人，项目也接近[30个](https://github.com/fluttercandies)，收获颇多，希望有更多的人能加入我们，一起制造更多好用的Flutter🍬。

Flutter Candies[![](https://user-gold-cdn.xitu.io/2019/10/27/16e0ca3f1a736f0e?w=90&h=22&f=png&s=1827)QQ群:181398081](https://jq.qq.com/?_wv=1027&k=5bcc0gy)，人还不多，但是很热闹。这是一个摆龙门阵的地方；可以求助现场大佬/观众的地方；也是可以互相学习共同进步的地方。

## 感恩

* 加入掘金跟入坑Flutter的时间一样，也是一年了，感恩。单纯的技术平台，让程序猿们都聚在一起，互相学习，共同进步。说它单纯呢，它却不那么正经，有各种板块(相亲，摸鱼，翻译等等)，我现在都把它当朋友圈用了，@all, 你今天收到了我的鸡汤了吗？

* 感恩抱过的大腿们(大部分都是喵头像，是不是巧合)，[Vadaski](https://juejin.im/user/1767670428477015) ，[JarvanMo](https://juejin.im/user/2348212565845704)，[debuggerx](https://juejin.im/user/4371313962520183)，[恋猫de小郭](https://juejin.im/user/817692379985752)， [wendux](https://juejin.im/user/1556564164217784)，[低调](https://www.kikt.top/)，[拉面](https://juejin.im/user/4265760846775533)等等等。感谢大佬的帮助，这也是[Flutter Candies](https://github.com/fluttercandies)创建的用意，希望也能帮助到其他人，为Flutter社区贡献微薄之力。自己从大佬那里学到了，然后可以告诉别人，别人又可以再传递给其他人，这样社区才会越来越好。

## Flutter Candies 介绍

这是一个集合了Flutter开发中常用的组件/插件🍬的全家桶，大家可以很方便的集成到自己的项目当中，下面我按照作者来介绍Flutter Candies 的各个项目。篇幅会有点长，请准备好瓜子汽水坐好，开车了，滴滴滴滴滴。

### [AlexV525](https://juejin.im/user/606586150596360)

从开始在群里提需求，到可以在群里解答问题 ；从一个养鱼专业的学生，到入行Flutter岗位工作。4月份入群到现在，看到了他的变化，也看到🍬组织的意义。入坑之后就住在了Github上面。
![](https://user-gold-cdn.xitu.io/2019/10/28/16e10c97a3abd351?w=804&h=261&f=png&s=8937)

#### [OpenJMU校园应用](https://github.com/openjmu/OpenJMU)

精美的校园App，整个应用的完成度非常高，功能完整，因为账号权限的问题，无法登录。如果你看到某个功能，可以去找这个功能的实现代码，找不到的话可以来群里问问。
![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f2404fccd9a2?w=1573&h=1573&f=png&s=2968025)

|  ![](https://user-gold-cdn.xitu.io/2019/10/28/16e1063a20cb3eed?w=400&h=867&f=png&s=262739) | ![](https://user-gold-cdn.xitu.io/2019/10/28/16e10c5522c0dcaf?w=400&h=867&f=png&s=239226) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f246f4d958a7?w=400&h=867&f=png&s=309710) |
| ----------------------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- |
| ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f270c95557cd?w=1080&h=1920&f=png&s=1934605) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f2741378feba?w=400&h=867&f=png&s=129310) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f280c43e515a?w=400&h=867&f=png&s=77119) |
|  ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f287f789546f?w=400&h=867&f=png&s=49425) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f28cc77a4355?w=400&h=867&f=png&s=148845) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2f2983fd40cd6?w=400&h=867&f=png&s=286044) |

#### [GitHub 项目](https://github.com/fluttercandies/gitcandies)
![](https://user-gold-cdn.xitu.io/2019/10/28/16e10397da84b14c?w=512&h=512&f=png&s=42534)

从0搭建的Flutter实战项目，项目代码继续更新中，感兴趣的小伙可以关注，
[掘金文章地址](https://juejin.im/post/6844903981563510797)，跟着从0开始写Flutter项目。

![](https://user-gold-cdn.xitu.io/2019/11/3/16e3040a72251d34?w=450&h=800&f=gif&s=4174233)

#### [波纹扩散高斯模糊动画](https://github.com/fluttercandies/ripple_backdrop_animate_route)

![](https://user-gold-cdn.xitu.io/2019/10/28/16e10d5cccd2f0e1?w=238&h=420&f=png&s=38060)

波纹扩散，并且带高斯模糊，按钮跳动效果，喜欢骚的童鞋可以收藏起来了。[掘金文章地址](https://juejin.im/post/6844903921371054087)

### [CrazyQ1](http://www.flutterj.com/)
[Flutter教程网](http://www.flutterj.com/)的作者，这是一个Flutter全方面信息的聚合网站.

#### [Flutter版微信](https://github.com/fluttercandies/wechat_flutter)

从0搭建的Flutter版微信实战项目，项目功能代码继续更新中，感兴趣的小伙可以关注他以及后续相关文章

![](https://user-gold-cdn.xitu.io/2019/11/19/16e8447877cdbd79?w=654&h=1296&f=png&s=319201) | ![](https://user-gold-cdn.xitu.io/2019/11/19/16e8447c6f2bd879?w=766&h=1368&f=png&s=318557) | ![](https://user-gold-cdn.xitu.io/2019/11/19/16e8447f255b81c2?w=766&h=1368&f=png&s=241347) |
| ----------------------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- |
|
![](https://user-gold-cdn.xitu.io/2019/11/19/16e8448ed2c9f2c3?w=654&h=1296&f=png&s=134558) | ![](https://user-gold-cdn.xitu.io/2019/11/19/16e84491231fa9d0?w=654&h=1296&f=png&s=93059) | ![](https://user-gold-cdn.xitu.io/2019/11/19/16e84493b8fc8069?w=654&h=1296&f=png&s=441599) |
|
![](https://user-gold-cdn.xitu.io/2019/11/19/16e8449d277e8b2d?w=654&h=1296&f=png&s=394437) | ![](https://user-gold-cdn.xitu.io/2019/11/19/16e8449f3d1f5a24?w=654&h=1296&f=png&s=138564) | ![](https://user-gold-cdn.xitu.io/2019/11/19/16e844a10d8bdbd7?w=654&h=1296&f=png&s=232665) |


### [入魔的冬瓜](https://juejin.im/user/1134351728776408)
最近刚入桶的兄弟，有责任心的开发者，对自己的项目会不断进行优化，达到最完美的状态

#### [自定义日历组件](https://github.com/fluttercandies/flutter_custom_calendar)

主要功能
* 支持公历，农历，节气，传统节日，常用节假日
* 日期范围设置，默认支持的最大日期范围为1971.01-2055.12
* 禁用日期范围设置，比如想实现某范围的日期内可以点击，范围外的日期置灰
* 支持单选、多选模式，提供多选超过限制个数的回调和多选超过指定范围的回调。
* 跳转到指定日期，默认支持动画切换
* 自定义日历Item，支持组合widget的方式和利用canvas绘制的方式
* 自定义顶部的WeekBar
* 根据实际场景，可以给Item添加自定义的额外数据，实现各种额外的功能。比如实现进度条风格的日历，实现日历的各种标记
* 支持周视图的展示
* 支持月份视图和星期视图的展示与切换联动

![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd5fe80a07ee?w=828&h=1792&f=png&s=279078) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd6ba45826c5?w=828&h=1792&f=png&s=125784) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd76bcccf20c?w=828&h=1792&f=png&s=156686) |
| ----------------------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- |
| 
![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd7de4df256d?w=828&h=1792&f=png&s=145183) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd80a68ccedf?w=828&h=1792&f=png&s=145183) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd836d5d7e08?w=828&h=1792&f=png&s=128922) |
| ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd8f4ea8d7af?w=828&h=1792&f=png&s=128922) | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd92c9c49bd9?w=828&h=1792&f=png&s=80458) |  |
|                ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fd9af1d37d3c?w=1080&h=2337&f=png&s=274687)                                 | ![](https://user-gold-cdn.xitu.io/2019/11/3/16e2fdb161303c46?w=1080&h=2337&f=png&s=239335)                                               |       
喜欢的小伙伴赶快收藏起来吧 [掘金文章地址](https://juejin.im/post/6844903848184659981)

### [Flutter笔记](https://juejin.im/user/3350967170642462)
公众号 Flutter笔记作者, Flutter小能手，欢迎关注微信公众号
![](https://user-gold-cdn.xitu.io/2019/10/29/16e15454740cf839?w=183&h=185&f=png&s=42589)

#### [Flutter 版本的网易云音乐](https://github.com/fluttercandies/NeteaseCloudMusic)

![](https://user-gold-cdn.xitu.io/2019/10/31/16e20c5876922c27?w=320&h=686&f=gif&s=4910167)

| ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57ba7c17267?w=362&h=717&f=png&s=30121) | ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57bb5d60073?w=362&h=717&f=png&s=32905) | ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57ba8e53e22?w=362&h=717&f=png&s=253068) |
| ----------------------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- |
| ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57ba7a10ea5?w=362&h=717&f=png&s=126084) | ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57ba99f0d34?w=362&h=717&f=png&s=161717) | ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57bd296beb0?w=362&h=717&f=png&s=284551) |
| ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57baa4e4353?w=362&h=717&f=png&s=131636) | ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57bebd43d2e?w=362&h=717&f=png&s=118957) | ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57be87f024b?w=362&h=717&f=png&s=95248) |
|                 ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57bef9cee0d?w=362&h=717&f=png&s=108744)                                    |        ![](https://user-gold-cdn.xitu.io/2019/11/2/16e2c57bf886fb45?w=362&h=717&f=png&s=90697)                                               |        

学习Flutter的一个途径就是模仿现有的App，在Flutter上面进行实现。这是一个从0搭建的网易云音乐。大家可以跟随着作者的思路一步步完成一个完整的Flutter项目。界面很舒服，功能持续更新中，大家快来收藏吧 [掘金文章地址](https://juejin.im/post/6844903959874945038)

#### [仿微信长按弹出菜单](https://github.com/fluttercandies/w_popup_menu)

![](https://user-gold-cdn.xitu.io/2019/10/29/16e155ecb893de5a?w=400&h=417&f=png&s=68227)

目前最好用的仿微信聊天长按弹出框，喜欢微信风格的小伙伴记得收藏起来[掘金文章地址](https://juejin.im/post/6844903911686422542)


### [caijinglong](https://www.kikt.top/)

低调，老乡，不能吃辣的四川人(偷笑.gif), 反正就很牛逼就是了。Flutter
小白鼠，任何新东西他都要去玩一下。我也跟着踩他填好的坑，在Flutter的路上一去不回。[Pub](https://pub.flutter-io.cn/packages?q=email%3Acjl_spy%40163.com) 25个。。可怕。。都是高分作品

![](https://user-gold-cdn.xitu.io/2019/10/30/16e1a6137546f439?w=1443&h=881&f=png&s=121521)

#### [flutter_image_editor](https://github.com/fluttercandies/flutter_image_editor)

![](https://user-gold-cdn.xitu.io/2019/10/30/16e1a6c908c2562d?w=360&h=640&f=gif&s=3489734)

flutter_image_editor可以说是低调为[extended_image](https://github.com/fluttercandies/extended_image)量身打造的原生插件，支持旋转裁剪翻转，extended_image负责图片编辑UI，flutter_image_editor提供原生裁剪图片数据能力。由于dart [image](https://pub.flutter-io.cn/packages/image)库在处理图片的效率问题，原生库(期待纯C++库)就有了很大的优势(大图片可以有10倍速度的提升)。正是因为teamwork才能使flutter上面对于图片编辑处理最终达到一个完美的状态。

### [法的空间](https://juejin.im/user/254742428916408)

法法，200，Flutter Candies 🍬 全家桶的楼主。在感受到大佬们的感化之后，也希望能帮助到更多的Flutter开发者。[pub](https://pub.flutter-io.cn/packages?q=email%3Azmtzawq%40gmail.com)目前13个，属于项目中比较常用的组件。

![](https://user-gold-cdn.xitu.io/2019/10/31/16e1fc27dcb7f44f?w=1462&h=855&f=png&s=102031)

#### [extended_nested_scroll_view](https://github.com/fluttercandies/extended_nested_scroll_view)

做项目遇到的第一个遇到的问题就是官方的NestedScrollView，各方求证以及查看源码之后发现应该只是as design。如果你即将使用官方的NestedScrollView，**强力建议先看一下，你必定会遇到下面的问题** [掘金文章地址](https://juejin.im/post/6844903713887240206)

##### 问题1. [NestedScrollView的Header中有锁定(Pinned=true)的Sliver组件的时候，body的滚动问题](https://github.com/flutter/flutter/issues/22393)

其实官方对这个是有处理的，是通过SliverOverlapAbsorber包裹SliverAppbar,代码不上了，其实[NestedScrollView](https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/widgets/nested_scroll_view.dart)的注释里面就有.

但是问题在，于如果header里面有多个pinned=true的sliver，我们该怎么处理了？为此我扩展了官方的组件。你可以通过设置pinnedHeaderSliverHeightBuilder回调来解决这个问题，在下面的代码中，pinnedHeaderHeight其实就是SliverAppbar最后折叠起来之后高度=状态栏高度+导航栏高度.如果你header中有其他锁定的sliver，你可以再把它们的高度加进去。

``` dart
      var pinnedHeaderHeight =
          //statusBar height
          statusBarHeight +
              //pinned SliverAppBar height in header
              kToolbarHeight;

 return NestedScrollView(
        pinnedHeaderSliverHeightBuilder: () {
          return pinnedHeaderHeight;
        },
       
```
##### 问题2. [NestedScrollView的body中TabView里面的列表会滚动同步互相影响](https://github.com/flutter/flutter/issues/21868)

由于NestedScrollView内部里面有一个ScrollController，TabView里面的列表的ScrollPosition都将会attach到这个sc上面，在滚动其中一个的时候，同步全部的ScrollPositions。由于篇幅原因，我这里直接放之前的[文章](https://juejin.im/post/6844903713887223821)了。

##### 问题3. 不能给body里面的列表设置ScrollController

由于body里面的列表必须共用同一个ScrollController，所以你是不能给列表单独设置ScrollController。如果设置了会导致内部的outer_scroll_controller和inner_scroll_controller无法协同工作。

大家想使用ScrollController无非3点。

1.下拉刷新，[已提供demo](https://github.com/fluttercandies/extended_nested_scroll_view/blob/master/example/lib/pages/pull_to_refresh.dart)

2.加载更多，[已提供demo](https://github.com/fluttercandies/extended_nested_scroll_view/blob/master/example/lib/pages/load_more.dart)

3.控制列表滚动，[已将属性暴露出来](https://github.com/fluttercandies/extended_nested_scroll_view/blob/master/example/lib/pages/scroll_to_top.dart)

##### 使用常见问题

* 组件名字跟官方相同，所以当你们使用的时候，记住屏蔽掉官方的(太大胆了)
``` dart
import 'package:flutter/widgets.dart' hide NestedScrollView;
```
* 对NestedScrollView不熟悉
这个建议先百度下，熟悉了官方的使用方式之后，再来看这些官方未解决的问题。

#### [extended_image](https://github.com/fluttercandies/extended_image)

![](https://user-gold-cdn.xitu.io/2019/10/30/16e1c05a816231b3?w=360&h=640&f=gif&s=4655124)

Flutter上面最能打的图片库(这样说没人打我吧) [掘金文章地址](https://juejin.im/post/6844903794656952328)

主要功能
* 缓存网络图片
* 加载状态(正在加载，完成，失败)
* 拖拽缩放图片
* 图片编辑(裁剪，旋转，翻转)
* 图片预览(跟微信掘金一样)
* 滑动退出效果(跟微信掘金一样)
* 设置圆角，边框

##### 使用常见问题
* 加载状态如何重写

设计原则是，如果你需要重写一个状态，就返回你想要的效果，否则请返回null。下面是一个重写“正在加载”的例子
``` dart
    ExtendedImage.network(
      item.imageUrl,
      loadStateChanged: (ExtendedImageState state) {
        if (state.extendedImageLoadState == LoadState.loading) {
          return Container();
        }
        return null;
      },
    );
``` 
 很多人因为在重写了completed状态而丢失了手势和裁剪功能，为此我新增了ExtendedImageState.completedWidget。下面是重写completed状态而不丢失裁剪手势功能的例子。
 ``` dart
     ExtendedImage.network(
      item.imageUrl,
      loadStateChanged: (ExtendedImageState state) {
        if (state.extendedImageLoadState == LoadState.completed) {
          return Padding(
            padding: EdgeInsets.all(10.0),
            child: state.completedWidget,
          );
        }
        return null;
      },
    );
``` 

* path_provider插件混合开发问题

请自行查看[issue](https://github.com/fluttercandies/extended_image/issues?utf8=%E2%9C%93&q=path_provider)

#### [extended_image_library](https://github.com/fluttercandies/extended_image_library)

extended_image的基础库，如果你只需要网络图片缓存功能，你可以只引用这个库
``` dart
    Image(
      image: ExtendedNetworkImageProvider("", cache: true),
    );
``` 

#### [extended_text](https://github.com/fluttercandies/extended_text)

![](https://user-gold-cdn.xitu.io/2019/10/31/16e1f62a1349e047?w=360&h=640&f=gif&s=461712)

富有中国特色强大功能的富文本 [掘金文章地址](https://juejin.im/post/6844903797911732238)

主要功能
* 快速构建富文本
* 支持选择(包括WidgetSpan)以及自定义菜单
* 支持溢出文字自定义
* 支持自定义背景

##### 使用常见问题

* SpecialTextSpanBuilder的使用

为了快速构建富文本，比如把 '[love]' 这种文字变成表情图片，提供了SpecialTextSpanBuilder。其原理很简单，就是根据你自己的规则，将文字转换成各种InlineSapn(TextSpan,ImageSpan,WidgetSpan).

这里build方法是用入栈的方式遍历文字，createSpecialText方法是用来根据你自己的规则创建SpecialText的。有一些用户可能觉得太复杂了，但是我这样考虑就是为了大家能根据自己业务的需求来自定义自己的规则。耐心看懂demo，你可以快速的自定义自己的富文本
``` dart
abstract class SpecialTextSpanBuilder
{
    TextSpan build(String data,
      {TextStyle textStyle, SpecialTextGestureTapCallback onTap})
      
    SpecialText createSpecialText(String flag,
      {TextStyle textStyle, SpecialTextGestureTapCallback onTap, int index});  
}
``` 

#### [extended_text_field](https://github.com/fluttercandies/extended_text_field)

Flutters上面唯一能支持输入内容是WidgetSpan的输入框 [掘金文章地址](https://juejin.im/post/6844903797911732238)

![](https://user-gold-cdn.xitu.io/2019/10/31/16e1fa9aff4957ce?w=360&h=640&f=gif&s=4693067)

主要功能
* 快速构建富文本
* 支持选择(包括WidgetSpan)以及自定义菜单

#### [仿掘金推特点赞按钮](https://github.com/fluttercandies/like_button)

仿掘金推特点赞按钮，带数量滚动动画[掘金文章地址](https://juejin.im/post/6844903856384524295)

![](https://user-gold-cdn.xitu.io/2019/10/31/16e1fee4ca88b6b1?w=1080&h=1920&f=gif&s=1756784)

#### [下拉刷新](https://github.com/fluttercandies/pull_to_refresh_notification)

可以在任何滚动场景中使用(包括NestedScrollView)的自定义下拉刷新组件， 只提供了下拉刷新的状态，你可以最大化的自定义自己的效果而不用拘泥于组件本身提供。你可以根据状态距离，构建出任何你想要的效果。demo里面的4种效果只是例子，欢迎大家pr更多更有趣的效果。[掘金文章地址](https://juejin.im/post/6844903714117910541)

![](https://user-gold-cdn.xitu.io/2019/10/31/16e208f4a2603991?w=360&h=640&f=gif&s=2069617)

##### 使用常见问题

* 不满一屏幕，无法下拉刷新
* iOS Bouncing 效果影响下拉刷新

这2个问题都可以通过设置列表的physics来解决,我这里提供了AlwaysScrollableClampingScrollPhysics。
``` dart
///in case list is not full screen and remove ios Bouncing
class AlwaysScrollableClampingScrollPhysics extends ClampingScrollPhysics {
  const AlwaysScrollableClampingScrollPhysics({ScrollPhysics parent})
      : super(parent: parent);

  @override
  AlwaysScrollableClampingScrollPhysics applyTo(ScrollPhysics ancestor) {
    return AlwaysScrollableClampingScrollPhysics(parent: buildParent(ancestor));
  }

  @override
  bool shouldAcceptUserOffset(ScrollMetrics position) {
    return true;
  }
}
``` 
#### [扩展列表](https://github.com/fluttercandies/extended_list)

支持特殊布局，内存清除以及可视区域Indexes变化追踪。[更多详情](https://github.com/fluttercandies/extended_image/blob/e1577bc4d0b57c725110a9d886703b98a72772b5/example/lib/pages/photo_view_demo.dart#L89)

回收图片缓存
``` dart
              collectGarbage: (List<int> indexes) {
                        ///collectGarbage
                        indexes.forEach((index) {
                          final item = listSourceRepository[index];
                          if (item.hasImage) {
                            item.images.forEach((image) {
                              final provider = ExtendedNetworkImageProvider(
                                image.imageUrl,
                              );
                              provider.evict();
                            });
                          }
                        });
                      },
```                      

| ![](https://user-gold-cdn.xitu.io/2019/11/26/16ea3842e1026ad2?w=450&h=800&f=gif&s=641643) |![](https://user-gold-cdn.xitu.io/2019/11/26/16ea38414ee5c5b0?w=450&h=800&f=gif&s=866814) |![](https://user-gold-cdn.xitu.io/2019/11/26/16ea383ebc51baf0?w=450&h=800&f=gif&s=711082) |
| ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |------------------------------------------------------------------------------------------------------------- |

#### [瀑布流](https://github.com/fluttercandies/waterfall_flow)

高性能的瀑布流布局，喜欢的瀑布流的小伙伴赶快收藏起来。

| ![](https://user-gold-cdn.xitu.io/2019/11/26/16ea37e03ac998bf?w=450&h=800&f=gif&s=1864924) | ![](https://user-gold-cdn.xitu.io/2019/11/26/16ea37e6a00c05a4?w=450&h=800&f=gif&s=5115847) |
| ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |

#### [列表加载更多](https://github.com/fluttercandies/loading_more_list)

继承了[UWP](https://baike.so.com/doc/23718184-24274055.html)的加载更多思想的作品，将UI跟数据源的契约完美打通，你只要写过一次，你就会爱上这种方式，新增支持瀑布流。[掘金文章地址](https://juejin.im/post/6844903725241204750)

![](https://user-gold-cdn.xitu.io/2019/10/31/16e2099b74224e6d?w=360&h=640&f=gif&s=4493069)

#### [extended_tabs](https://github.com/fluttercandies/extended_tabs)

支持TabBarView的联动，就是说二级TabBarView不能滑动了，就看一级能不能滑动，能滑动就滑动一级的 [掘金文章地址](https://juejin.im/post/6844903757734477831)

![](https://user-gold-cdn.xitu.io/2019/10/31/16e2183c362c46a7?w=400&h=711&f=gif&s=500933)

#### [路由注解](https://github.com/fluttercandies/ff_annotation_route)
轻巧灵活的路由注解工具，一行命令完成路由映射. [掘金文章地址](https://juejin.im/post/6844903919601074190)

#### [Json转换Dart实体类工具](https://github.com/fluttercandies/JsonToDart)

使用C#以及Flutter构建的json转换dart实体类工具，提供超级多的平台选择，大气的ui界面(偷笑.gif)       [掘金文章地址](https://juejin.im/post/6844903875833495566)

| 平台    | 语言 | 描述                                                                                                    | 代码/安装包地址                                                                                                               |
| ------- | ---- | ------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| windows | C#   | uwp构建，运行环境windows10，x86/x64                                                                     | [windows-uwp.zip](https://github.com/fluttercandies/JsonToDart/releases)                                                      |
| windows | C#   | wpf构建，运行环境windows10/windows8/widnows7，x86/x64                                                   | [windows-wpf.zip](https://github.com/fluttercandies/JsonToDart/releases)                                                      |
| windows | dart | flutter构建, 使用[官方方式](https://github.com/google/flutter-desktop-embedding)编译,x64 ,debug版本     | [windows-x64-flutter.zip](https://github.com/fluttercandies/JsonToDart/releases)                                              |
| windows | dart | flutter构建, 使用[go-flutter](https://github.com/go-flutter-desktop/go-flutter)编译,x64 ,debug版本      | [windows-x64-go-flutter.zip](https://github.com/fluttercandies/JsonToDart/releases)                                           |
| mac     | dart | flutter构建,使用[go-flutter](https://github.com/go-flutter-desktop/go-flutter)编译(官方方式,未找到产物) | [mac-go-flutter.zip](https://github.com/fluttercandies/JsonToDart/releases)                                                   |
| web     | C#   | [silverlight](https://baike.so.com/doc/5402730-5640416.html)构建, 需要安装silverlight插件，有浏览器限制 | [网页地址](https://fluttercandies.github.io/JsonToDart)和[带字体文件网页地址](https://fluttercandies.github.io/JsonToDartWeb) |
| web     | dart | [flutter-web](https://github.com/flutter/flutter_web)构建                                               | [网页地址]( https://fluttercandies.github.io/JsonToDartFlutterWeb/)                                                           |
| linux   | dart | flutter构建, 使用官方方式编译，(没有环境测试，假装可以用)                                               | [代码地址](https://github.com/fluttercandies/JsonToDart/tree/master/Flutter/desktop)                                          |                                          | [代码地址](https://github.com/fluttercandies/JsonToDart/tree/master/Flutter/desktop)                                          |

## Flutter常见问题

### 从哪里上手Flutter

[Flutter中国官方网站](https://flutter.cn/)，Flutter官方明媒正娶，从入门到深入，各种资源应有尽有。如果你准备入手Flutter，这应该是你必看的网站。

![](https://user-gold-cdn.xitu.io/2019/11/4/16e340bd77c3a50f?w=1883&h=842&f=png&s=125549)

### 萌新问问题

每个人都从萌新而来，如果你想开森的写代码，自己解决问题是必须的

* 英语是很重要的。

* [Google](https://www.google.com/)和[SO](https://stackoverflow.com)能解决你大部分的问题

* 问问题的时候，尽量上代码，或者说明你的意图，因为可能你的想法或者解决方向就是错误的 
![](https://user-gold-cdn.xitu.io/2018/12/19/167c4529b1d739e3?w=198&h=164&f=jpeg&s=3906)

* 如果实在无法自己解决，可以求助于大佬，但是请注意提问方式，毕竟好沟通能节约双方的时间，大佬也要工作也要吃饭。
![](https://user-gold-cdn.xitu.io/2019/10/10/16db412f343531e6?w=627&h=391&f=jpeg&s=43164)

### 怎么找插件

把你的想要效果的插件的名字或者其他平台的组件叫什么名字，转为为英文，到[pub](https://pub.flutter-io.cn/) 上面搜索，分高的使用的人多，相对就比较稳定更好。

### 安卓下载各种东西慢
我们经常运行别人组件的时候，发现各种下载失败，各种下载缓慢
请使用国内镜像，飞一般的赶脚。

* 替换google()和jcenter()

`google()`

`jcenter()`

替换为下面

`maven { url 'https://maven.aliyun.com/repository/google' }`

`maven { url 'https://maven.aliyun.com/repository/jcenter' }`

`maven { url 'http://maven.aliyun.com/nexus/content/groups/public' }`

* 替换grade下载地址
将上面的替换成下面镜像
```
#distributionUrl=https\://services.gradle.org/distributions/gradle-5.1.1-all.zip
#csdn镜像
distributionUrl=https\://downloads.gradle-dn.com/distributions/gradle-5.1.1-all.zip
```

### 为啥设置Size没有效果

在开发中，我们发现给组件设置了大小，但是却没有效果。举个栗子，在Appbar的leading/actions中，我们想直接设置宽高是不可能的。  我们需要使用UnconstrainedBox来移除父widget对子大小的限制，如下代码
``` dart
      AppBar(
        title: Text(widget.title),
        leading: UnconstrainedBox(
          child: Container(
            width: 50.0,
            height: 10.0,
            color: Colors.red,
          ),
        ),
      ),
``` 
### 键盘弹出的时候，怎么把布局顶上去，而不遮住布局

* 通过下面代码获取键盘高度(放心键盘弹出或者收起的时候都会触发build)
``` dart
double keyboardHeight = MediaQuery.of(context).viewInsets.bottom;
```
* 然后你的布局大概就是下面这样
``` dart
    Column(
      children: <Widget>[
        ///你的布局
        Expanded(
          child: Container(),
        ),
        ///顶起你的布局
        Container(
          height: keyboardHeight,
        )
      ],
    );
```
其实这个我也是在源码里面[scaffold.dart](https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/material/scaffold.dart)中看到的，抄作业很重要

关键代码
![](https://user-gold-cdn.xitu.io/2019/11/1/16e25778d3f1037d?w=920&h=154&f=png&s=27721)
并且在_ScaffoldLayout中增加了这个高度

### https://pub.dev 慢，打不开?!

[中国镜像](https://pub.flutter-io.cn/)你在等什么呢，学起来

### 国际化之后设置hintText，光标位置不一致

[issue地址](https://github.com/flutter/flutter/issues/40118) 通过设置下面代码解决，全局设置文字主题

``` dart
 textTheme: theme.textTheme.copyWith(
          subhead: theme.textTheme.subhead
              .copyWith(textBaseline: TextBaseline.alphabetic)),
```
### 我的文本设置了溢出，为啥没有效果
我们经常听到的就是为什么我的文本设置了溢出显示，但是它却显示黄色溢出警告了？
对于文本Text来说，如果它的父Widget没有给它做大小限制，它默认是无限长的
我们解决的方法如下。

* 给它设置个大小，如果无效请参考 为啥设置Size没有效果 （特别注意，Row/Column嵌套的时候。你需要从最外面一层就给内层限定大小，参考下面一条）
* Row/Column中，给它设置Expaned/Flexible
  这样告诉文本，你的大小是，其他widget剩下的那空间。
  Expaned/Flexible都有这个作用，但是它们的区别是什么呢。给你们看2张图你就明白了。

``` dart
     return Row(
      children: <Widget>[
        Flexible(
          child: Text(
            "我是一个很短的文本",
            overflow: TextOverflow.ellipsis,
            style: TextStyle(fontSize: 12),
          ),
        ),
        Container(
          color: Colors.red,
          width: 100.0,
        )
      ],
    );
```

![](https://user-gold-cdn.xitu.io/2019/11/3/16e314272ed88dc3?w=516&h=578&f=png&s=43679)

``` dart
    return Row(
      children: <Widget>[
        Expanded(
          child: Text(
            "我是一个很短的文本",
            overflow: TextOverflow.ellipsis,
            style: TextStyle(fontSize: 12),
          ),
        ),
        Container(
          color: Colors.red,
          width: 100.0,
        )
      ],
    );
```

![](https://user-gold-cdn.xitu.io/2019/11/3/16e3142f6b40735a?w=512&h=545&f=png&s=45982)

Expaned/Flexible 两者的区别就在于，Expanded会强制占100剩余的空间，而Flexible可以自适应。当然他们最大也都是占100剩余的空间。

### 获取滚动组件中孩子的位置

[demo](https://github.com/fluttercandies/extended_nested_scroll_view/blob/master/example/lib/see_your_widget_demo.dart)

更多的细节，你可以[查看文章](https://juejin.im/post/6844903764168704007)

### 官方的Appbar不好用

由于官方的Appbar增加了对material风格的设置，所以很多地方都有一些限制。其实也不能怪官方，这是一种设计规范。但是我们就是想自己骚怎么办呢？？
我之前写了个
[my_app_bar.dart](https://github.com/fluttercandies/FlutterCandies/blob/master/widgets_sample/lib/widgets/my_app_bar.dart)，之前一直放gists上面，不方便大家查看，现在也移入了🍬。这是一个简单的实现，看明白了代码原理之后，你可以扩展出更多适合自己的appbar。

### 掘金斗鱼的那种首页滚动效果怎么做？

![](https://user-gold-cdn.xitu.io/2019/11/3/16e3004ff5cba196?w=450&h=800&f=gif&s=949643)

因为有好几个人问过，所以我写了个简单的[demo](https://github.com/fluttercandies/FlutterCandies/blob/master/widgets_sample/lib/widgets/float_scroll.dart)。主要是靠NotificationListener来监听滚动来控制头部。

### 黄色警告 ⚠ 一定要管吗？

不是每一种警告，都是一定要管的。警告只是官方告诉你需要注意这点，这就是为什么Release下面不会出现警告。警告不等于错误。

我这里举一个栗子。NestedScrollView的body其实是SliverFillRemaining包住的，它会跟着一起滚动。但是我们这里布局里面是一个Tabbar，它是一个有固定高度的组件，当它超出屏幕的时候就会出现警告。但是事实上，这种警告并不能影响我们的使用。

![](https://user-gold-cdn.xitu.io/2019/11/3/16e302714fe07dbc?w=450&h=800&f=gif&s=2149572)

### push/pop的时候页面重新build

如果你是因为页面重新build就影响你的业务，那应该好好检查下业务逻辑代码。build的原因是route变化时候的动画，以及NavigatorState中Overlay(实际就是Stack)，route位置变化而引起的页面build。

### ListView嵌套，shrinkWrap 的使用

Listview里面嵌套Listview，是我经常看到过的，会报错。然后就会有人说 把这个设置成shrinkWrap 设置成true。下面我们来看看这个属性的意思。

``` dart
  /// Whether the extent of the scroll view in the [scrollDirection] should be determined by the contents being viewed.
  ///
  /// If the scroll view does not shrink wrap, then the scroll view will expand to the maximum allowed size in the [scrollDirection]. If the scroll view has unbounded constraints in the [scrollDirection], then [shrinkWrap] must be true.
  ///
  /// Shrink wrapping the content of the scroll view is significantly more expensive than expanding to the maximum allowed size because the content can expand and contract during scrolling, which means the size of the scroll view needs to be recomputed whenever the scroll position changes.
  ///
  /// Defaults to false.
  final bool shrinkWrap;
```
* 设置shrinkWrap为true，scrollview的范围将是全部内容的高度，否则是为viewport的高度。列表或者说ScrollView其实有一个可视区域的概念(Viewport)，就是滚动时候的可见的部分，这个区域的大小往往需要你自己告诉他或者它的父亲告诉它，超出这个范围的内容会根据情况进行回收。

* 我们这里看到为什么直接使用Listview嵌套Listview会报错了。因为Listview本身是无高度限制的，而你把一个Listview放在一个Listview里面，里面的Listview的viewport是无从得知的。那怎么办呢？ 那只能使用设置shrinkWrap为true，让里面的Listview的高度其实等于自己全部内容的高度。这样外面Listview就能知道这个孩子的高度了。

* 设置shrinkWrap为true，**更消耗性能**。因为在滚动的时候都需要重新去计算高度是否变化。并且**不会回收**可视区域之外的内容。

* 使用ListView嵌套Listview的场景往往都能使用Sliver系列来解决，详情请看下一个问题

### Sliver 一生之敌？一生之爱？

![](https://user-gold-cdn.xitu.io/2019/10/18/16ddcea08cf56d0f?w=392&h=145&f=png&s=14253)
群里萌萌说的时候，我有点惊讶道，但是Sliver确实是经常有人问到的。

Sliver系列的东东很多，我们下面来一一介绍一下。

* [**CustomScrollView**](https://docs.flutter.io/flutter/widgets/CustomScrollView-class.html) 是Sliver组件的老祖宗，全部的Sliver都放在这个里面，大家别看ListView/GridView跟他们不一样，其实里面还是Sliver系列，只是不能将他们直接放到Sliver里面，也不建议这样做。

* [**NestedScrollView**](https://api.flutter.dev/flutter/widgets/NestedScrollView-class.html)这个也是大家经常使用到的，其实里面是一个CustomScrollView，它的headers是Sliver的数组，body是被包裹在 [**SliverFillRemaining**](https://docs.flutter.io/flutter/widgets/SliverFillRemaining-class.html) 中的

* [**SliverList**](https://docs.flutter.io/flutter/widgets/SliverList-class.html) 列表跟ListView用法差不多，跟CustomScrollView一起使用

* [**SliverFixedExtentList**](https://docs.flutter.io/flutter/widgets/SliverFixedExtentList-class.html), 
比SliverList多一个就是相同的Extent，这样性能会更好，跟CustomScrollView一起使用

* [**SliverPrototypeExtentList**](https://docs.flutter.io/flutter/widgets/SliverPrototypeExtentList-class.html) 主轴上面有相同的Extent，跟SliverFixedExtentList灵活，不需要设置Extend，而是根据prototypeItem来获取Extent

* [**SliverGrid**](https://docs.flutter.io/flutter/widgets/SliverGrid-class.html),
可以设置每行的个数的Grid，跟CustomScrollView一起使用

* [**SliverPadding**](https://docs.flutter.io/flutter/widgets/SliverPadding-class.html),跟Padding一样的使用，区别是child变成了sliver
``` dart
    SliverPadding(
      sliver: SliverList(),
      padding: EdgeInsets.all(5.0),
    );
```

* [**SliverPersistentHeader**](https://docs.flutter.io/flutter/widgets/SliverPersistentHeader-class.html) 非常好用的组件，SliverAppBar就是用这个实现的。这个组件的特点是可以创建出随着滑动变化的可以Pinned的元素，大家经常用的什么吸顶组件可以用这个很方便的构建,前面讲到的自定义SliverAppbar（[my_app_bar.dart](https://github.com/fluttercandies/Flutter_Candies/blob/master/widgets_sample/lib/widgets/my_app_bar.dart)）就是利用它实现的。

* [**SliverAppBar**](https://docs.flutter.io/flutter/widgets/SliverAppBar-class.html)  跟Appbar的最大区别就可以根据滚动状态来折叠内容，主要是由状态栏高度+导航栏高度+折叠高度组成

* [**SliverToBoxAdapter**](https://docs.flutter.io/flutter/widgets/SliverToBoxAdapter-class.html)
当你想把一个非Sliver的Widget放在CustomScrollview里面的时候，你需要用这个包裹一下。

* [**SliverSafeArea**](https://docs.flutter.io/flutter/widgets/SliverSafeArea-class.html) 为了防止各种边界的越界，比如说越过顶部的状态栏

* [**SliverFillRemaining**](https://docs.flutter.io/flutter/widgets/SliverFillRemaining-class.html)使用这个它会填充完viewport里面的剩余全部空间。NestedScrollView的body就是这个包裹住的。

* [**SliverOverlapAbsorber**](https://docs.flutter.io/flutter/widgets/SliverOverlapAbsorber-class.html),[**SliverOverlapAbsorberHandle**](https://docs.flutter.io/flutter/widgets/SliverOverlapAbsorberHandle-class.html) 这个是关于NestedScrollView 解决Pinned头部的，这里不赘述，我前面也讲的有。

其实Sliver系列没有那么可怕，如果你弄懂每一个Sliver的使用场景，你可以完成其他平台可能需要很费劲才能做出来的效果。下面举一些常用的栗子吧。

* Listview嵌套ListView
 这种大部分情况可以用下面代码代替。

``` dart
    return CustomScrollView(
      slivers: <Widget>[
        SliverList(),
        SliverList(),
      ],
    );
```
如果你是水平垂直嵌套的话，可以设置内部那个Listview的高度或者宽度
``` dart
    return ListView(
      children: <Widget>[
        SizedBox(
          height: 60.0,
          child: ListView.builder(
              itemBuilder: (c, index) {}, scrollDirection: Axis.horizontal),
        )
      ],
    );
```

* 主流App首页带滚动头

注意这个NestedScrollView不是官方的，是我扩展的。详细情况请看上面
``` dart

///因为SliverAppBar是pinned:true，所以我们需要算上这部分高度
      var pinnedHeaderHeight =
          //statusBar height
          statusBarHeight +
              //pinned SliverAppBar height in header
              kToolbarHeight;
              

 return NestedScrollView(
        pinnedHeaderSliverHeightBuilder: () {
          return pinnedHeaderHeight;
        },
      headerSliverBuilder: (BuildContext context, bool innerBoxIsScrolled)
      {
        return <Widget>[
         SliverAppBar(pinned:true),
         //可是banner，也可以是广告位之类的
         SliverToBoxAdapter(),
         //当然可以个列表
         SliverList(),
         //我们也可以在这里创建可以吸顶的内容
         //如果这个是pinned等于true的，记得把这部分高度增加到pinnedHeaderHeight当中
         SliverPersistentHeader()
        ];
      },
      body: Column(
        children: <Widget>[
          ///最终Tabbar会被Pinned在SliverAppbar(pinned:true)下面。
          ///当然，比如说sliverappbar下面 有另外一个pinned为ture的 ///sliver。那边tabbar最后会在这个pinned ///true的sliver下面。（总的pinnedHeaderHeight高度应该是（状///态栏高度+导航栏高度=pinned为true的SliverAppbar）+pinne///d为ture的Sliver的高度）
          TabBar(),
          Expanded(
            child: TabBarView(),
          )
        ],
      ),
    );
```
* 分组的列表

这样写的一个好处，内容可以被回收，性能好。
``` dart
    return CustomScrollView(
      slivers: <Widget>[
        //分组头部1，
        SliverToBoxAdapter(),
        //分组1
        //分组2
        当然我们在SliverList的第一item里面特殊处理下，增加分组头
        SliverList(),
              SliverList(delegate: SliverChildBuilderDelegate((c, index) {
          ///item 内容
          Widget item = Container();
          if (index == 0) {
            item = Column(
              children: <Widget>[
                ///分组2头部
                Container(),
                item
              ],
            );
          }
          return item;
        })),
      ],
    );
```

当然栗子是举不完的，但是当你学会使用之后，终于有一天，一生之敌会变成你的一生之爱的。

### 其他常见问题

[之前收集的一些问题](https://juejin.im/post/6844903743075385352)


## 结语

* 如果你坚持看到这里，真爱啊，快加入小糖果吧[![](https://user-gold-cdn.xitu.io/2019/10/27/16e0ca3f1a736f0e?w=90&h=22&f=png&s=1827)QQ群:181398081](https://jq.qq.com/?_wv=1027&k=5bcc0gy)。我们这里有吃瓜群众，保安，门卫，秘书，群花，大佬，感谢他们的默默付出。如果你是喜欢分享的，请加入我们；如果你需要分享的，也请加入我们。

* 入坑Flutter的一年，除了工作时间之外，业余时间也付出很多在Flutter上面。有时候做一个东西，思路来了，可能会肝到凌晨4，5点。我倒不是提倡这种，程序猿还是要注意自己的身体，身体才是写代码的本钱。但是我们如果每天睡觉之前能挤出1小时来学习下，一年就是365小时=15天，相信收获还是很大的。给自己定义一个小目标，一步一步的完成。

* 最后展望一下明年的Flutter。期待热更新，web性能提升，以及对C++更好的支持。

![](https://user-gold-cdn.xitu.io/2019/11/3/16e3165a7377eca2?w=1920&h=1920&f=png&s=131155)
